import { ThemeColors } from "../theme.slint";
import { DiffLine } from "../structs.slint";
import { UnifiedView } from "unified.slint";
import { SideBySideView } from "side_by_side.slint";

export component DiffView inherits Rectangle {
    in property <ThemeColors> theme;
    in property <bool> side-by-side;
    in property <string> selected-file;
    in property <[DiffLine]> lines: [];
    in property <length> font-size: 13px;

    background: theme.bg-primary;

    if selected-file == "": Rectangle {
        // Empty state
        VerticalLayout {
            alignment: center;

            Text {
                text: "Select a file to view diff";
                color: theme.text-muted;
                font-size: 14px;
                horizontal-alignment: center;
            }
        }
    }

    if selected-file != "" && !side-by-side: UnifiedView {
        theme: root.theme;
        lines: root.lines;
        font-size: root.font-size;
    }

    if selected-file != "" && side-by-side: SideBySideView {
        theme: root.theme;
        lines: root.lines;
        font-size: root.font-size;
    }
}
